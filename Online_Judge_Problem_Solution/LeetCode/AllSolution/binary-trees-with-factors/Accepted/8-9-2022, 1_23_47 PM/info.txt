{"id":769121597,"lang":"cpp","time":"1 day, 19 hours","timestamp":1660029827,"status_display":"Accepted","runtime":"145 ms","url":"/submissions/detail/769121597/","is_pending":"Not Pending","title":"Binary Trees With Factors","memory":"9.1 MB","code":"typedef long long int ll;\nll mod=1e9+7;\nclass Solution {\npublic:\n    int numFactoredBinaryTrees(vector<int>& arr) {\n        int n=arr.size();\n        ll dp[n];\n        for(int i=0;i<n;i++)dp[i]=0;\n        sort(arr.begin(),arr.end(),greater<int>());\n        map<int,int>mp;\n        for(int i=0;i<n;i++){\n            mp[arr[i]]=i;\n        }\n        dp[n-1]=1;\n        ll ans=1;\n        for(int i=n-2;i>=0;i--){\n            int num=arr[i];\n            for(int j=i+1;j<n;j++){\n                if(num/arr[j]>arr[j])break;\n                if(num%arr[j]==0&&mp.count(num/arr[j])){\n                    \n                    int sec=mp[num/arr[j]];\n                    if(j==sec){\n                        dp[i]+=(dp[j]*dp[j]);\n                    }\n                    else{\n                        dp[i]+=2*((dp[j]*dp[sec])%mod);\n                    }\n                }\n                if(dp[i]>=mod)dp[i]%=mod;\n            }\n            dp[i]+=1;\n            ans+=dp[i];\n            if(dp[i]>=mod)dp[i]%=mod;\n            if(ans>=mod)ans%=mod;\n        }\n        return ans;\n    }\n};","compare_result":"111111111111111111111111111111111111111111111111","title_slug":"binary-trees-with-factors"}